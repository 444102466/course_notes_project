{% extends "notes/base.html" %}

{% block title %}{{ note.title }} - StudyMate{% endblock %}

{% block content %}
    <section class="detail-section">
        <!-- Back Button -->
        <a href="{% url 'notes:index' %}" class="back-link">
            <span class="arrow-back">‚Üê</span>
            Back to Notes
        </a>

        <!-- Note Details Card -->
        <div class="detail-card">
            <!-- Header with Icon and Meta Info -->
            <div class="detail-header">
                <div class="note-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="#8B5CF6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 2V8H20" stroke="#8B5CF6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                
                <div class="detail-header-info">
                    <!-- Title -->
                    <h2 class="detail-title">{{ note.title }}</h2>
                    
                    <!-- Meta Information -->
                    <div class="detail-meta">
                        <!-- Course Badge -->
                        <div class="course-badge">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20" stroke="currentColor" stroke-width="2"/>
                                <path d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2V2Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            {{ note.course }}
                        </div>
                        
                        <!-- Date -->
                        <div class="detail-date">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            {{ note.date|date:"F j, Y" }}
                        </div>

                        <!-- Status Select (no JavaScript) -->
                        <form method="post" action="{% url 'notes:detail' note.id %}" style="display: inline-block; margin: 0;">
                            {% csrf_token %}
                            <select name="status" class="status-select {% if note.status == 'completed' %}status-completed{% else %}status-ongoing{% endif %}">
                                <option value="ongoing" {% if note.status == 'ongoing' %}selected{% endif %}>on going</option>
                                <option value="completed" {% if note.status == 'completed' %}selected{% endif %}>completed</option>
                            </select>
                            <button type="submit" class="btn-submit" style="margin-left: 8px; padding: 6px 14px; font-size: 12px; border-radius: 999px;">Update</button>
                        </form>

                    </div>
                </div>

                <!-- Edit icon in top-right of header -->
                <a href="{% url 'notes:edit' note.id %}" class="edit-note-link edit-note-link-header" title="Edit note">
                    <span class="edit-icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                            <path d="M20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/>
                        </svg>
                    </span>
                </a>
            </div>

            <!-- Content Section -->
            <div class="detail-content">
                <h3>Description</h3>
                <div class="detail-content-text">{{ note.content }}</div>
            </div>

            <!-- Action Buttons -->
            <div class="detail-actions">
                <a href="{% url 'notes:index' %}" class="btn-back">
                    Back to Notes
                </a>
                <a href="{% url 'notes:confirm_delete' note.id %}" class="btn-delete">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                        <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Delete Note
                </a>
            </div>
        </div>
    </section>
{% endblock %}